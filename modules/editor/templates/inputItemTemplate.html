<section>
	<div style="margin-bottom:20px;">
		<label ng-if="kepsType.display.label" >{{kepsType.display.label}}:</label>
		<label ng-if="!kepsType.display.label">{{kepsName}}:</label>
		<span ng-show="typeError" style="color:red">Did not find a useable input type, defaulting to string</span>
		<!-- Start listing input types -->
		<div ng-if="kepsType.type" >
			<div ng-if="kepsType.type.indexOf(':') > -1">
			    <input type="text" list="{{kepsType.type + 'options'}}" class="{{}}" ng-model="data.value" ng-blur="setReferenceData()"></input>
			    <datalist id="{{kepsType.type + 'options'}}">
			    	<option ng-repeat="option in data.options" value="{{option.value}}" 
			    	></option>
			    </datalist>
			</div>
			<div ng-if="kepsType.type === 'string'">
				<input type="text" ng-required="kepsType.required" ng-model="data.value" class="form-control" placeholder="{{kepsType.display.placeholder}}"></input>
			</div>
			<div ng-if="kepsType.type === 'number'">
				<input type="number" ng-required="kepsType.required" ng-model="data.value" class="form-control"></input>
			</div>
			<div ng-if="kepsType.type === 'boolean'">
				<div style="width:40%;display:inline-block;">
				  <label class="btn-floating blue" style="text-align:center;margin-right:20px;"><input  type="radio" ng-required="kepsType.required" ng-model="data.value" ng-value="true">True</label>
				  <label class="btn-floating red" style="text-align:center"><input  type="radio" ng-required="kepsType.required" ng-model="data.value" ng-value="false">False</label>
				</div>
				<div style="width:40%;display:inline-block;">
					<h6>Current Value: {{data.value}}</h6>
				</div>
			</div>
			<div ng-if="kepsType.type === 'file'">
				<div class="row">
					<div class="form-group col-xs-6">
						<label>Import file from computer</label>
						<input type="file" ng-required="kepsType.required" style="margin:15px;" onchange="angular.element(this).scope().fileChanged(event)"></input>
					</div>
					<div class="col-xs-6">
						<ul style="list-style:none;">
							<li><strong>File Info</strong></li>
							<li>FileName: {{kepsModel.fileName}}</li>
							<li>Size: {{kepsModel.fileSize}}</li>
						</ul>
					</div>
				</div>
			</div>
			<div ng-if="kepsType.type === 'html'">
				<text-angular ng-model="data.value" ng-required="kepsType.required" placeholder="{{kepsType.display.placeholder}}"></text-angular>
			</div>
			<div ng-if="kepsType.type === 'datetime'">
				<div class="row">
					<div class="form-group col-xs-6">
						<input type="date" ng-required="kepsType.required" class="form-control"  ng-model="data.date" ng-blur="makeTime()" placeholder="yyyy-MM-dd"></input>
					</div>
					<div class="form-group col-xs-6">
						<input type="time" ng-required="kepsType.required" class="form-control"  ng-model="data.time" ng-blur="makeTime()"></input>
					</div>
				</div>
			</div>
			<div ng-if="kepsType.type === 'image'">
				<div class="row">
					<div class="form-group col s4">
						<div ng-show="!import">
							<label>Import image from computer:</label>
							<div class="btn waves-effect waves-light" style="display:inline-block;position:relative;">
								Upload Image
								<input type="file" style="position: absolute; top: 0px; width: 107px; left: 0px; height: 35px; opacity: 0;" ng-required="kepsType.required" style="margin:15px;" onchange="angular.element(this).scope().imageFileChanged(event)" accept="image/*"></input>
							</div>
							<br>
							<a href="" ng-click="import = true;image.file = ''">Or... Upload an image from a url.</a>
						</div>
						<div ng-show="import">
							<label>Import image from url:</label>
							<input type="text" ng-required="kepsType.required" class="form-control" ng-model="data.imageUrldga" placeholder="Enter image url"></input>
							<button style="margin-top:5px;" class="btn btn-success" ng-click="getImageUrl()">Grab Image</button><br>
							<a href="" ng-click="import = false;">Or... Upload a file from your computer</a>
						</div>
					</div>
					<div class="col s8" >
						<canvas id="{{kepsType.randomCanvasId}}"></canvas>
						<span ng-show="imageData.height && imageData.width">{{imageData.width + ' X ' + imageData.height}}</span>

					</div>
				</div>
			</div>
			<div ng-if="kepsType.type === 'url'">
				<input type="url" ng-required="kepsType.required" ng-model="data.value" class="form-control" placeholder="{{kepsType.display.placeholder}}"></input>
			</div>
			<div ng-if="kepsType.type === 'geopoint'">
					<div style="width:20%;display:inline-block;">
						  <label>Lat:</label>
						  <input type="number" step="any" class="form-control" ng-model="data.value.lat">
						  <label >Lng:</label>
						  <input type="number" step="any" class="form-control" ng-model="data.value.lng">
						  <button class="btn-floating waves-effect waves-light green" style="text-align:center" ng-click="testLatLng()">Test</button>
					</div>
					<div style="width:79%;display:inline-block;" >
						<div id="map" style="width:100%;">
						</div>
					</div>
			</div>
			<div ng-if="kepsType.type === 'email'">
				<span ng-show="!data.emailCorrect && data.value.length > 2" style="color:red;">Not valid email</span><span ng-show="data.emailCorrect" style="color:green;">Valid Email</span>
				<input type="email" ng-keydown="testEmail()" ng-required="kepsType.required" ng-model="data.value" class="form-control" placeholder="{{kepsType.display.placeholder}}"></input>
			</div>
			<div ng-if="kepsType.type === 'enum'">
				<select ng-model="data.value" ng-options="opt for option in kepsType.options">
				</select>
			</div>
			<div ng-if="kepsType.type === 'multi'">
				<select class="form-control" multiple ng-multiple="true" ng-model="data.value" ng-options="opt for opt in kepsType.options">
				</select>
			</div>
			<div ng-if="kepsType.type === 'address'">
				<!--http://ipinfo.io/-->
				<p style="margin-bottom:-10px;">
					Address Line 1:
				</p>
			  	<div class="col s12">
			    	<input type="text" ng-model="data.address1" ng-keydown="checkAddress()">
			  	</div>
			  	<label>Street address, P.O. box, company name, c/o</label>
				
				<p style="margin-bottom:-10px;">
				 	Address Line2:
				</p>
				<div class="col s12">
				   <input type="text" ng-model="data.address2">
				</div>
			 	<label>Apartment, suite, unit, building, floor, etc.</label>
				
				<p>City:</p>
			  	<div class="col s12">
			    	<input type="text" ng-model="data.city" ng-keydown="checkAddress()">
			  	</div>

				<p>State / Province / Region / County: </p>
				<div class="col s12">
				    <input type="text" ng-model="data.state" ng-keydown="checkAddress(event)">
				</div>
			  	<label>Two capital letter abbreviation</label>

				<p>ZIP / Postal Code / Postcode:</p>
				<div class="col s12">
					<input type="text" ng-model="data.zip">
				</div>

				<p>Country:</p>
				<div class="col s12">
					<input type="text" ng-model="data.country">
				</div>
				<div class="row">
					<div class="col s4">
						<p>Preview:
						<br>
						{{data.address1 + ' ' + data.address2}}
						<br>
						{{data.city + ', ' + data.state + ' ' + data.zip}}
						<br>
						{{data.country}}
					</div>
					<div class="col s7">
						<img class="map" src="https://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA">
					</div>
				</div>
			</div>
			<div ng-if="kepsType.type === 'phone'">
				<!---http://jackocnr.com/intl-tel-input.html -->
				<input type="text" ng-required="kepsType.required" ng-model="data.value" class="form-control" placeholder="{{kepsType.display.placeholder}}"></input>
			</div>
			<span class="help-block" ng-if="kepsType.display.instructions">{{kepsType.display.instructions}}</span>
		</div>
	</div>
</section>
