<section data-ng-controller="ModelsCtrl">
	<div class="container">
		<h2 style="text-transform: capitalize">The <i>{{modelName}}</i> Model</h2>
		<p class="lead" ng-show="model.properties.description">{{model.properties.description}}</p>
		<table class="table table-striped table-bordered table-hover" >
		  <thead>
		    <tr>
		      <th>Field</th>
		      <th>Description</th>
		      <th>Constraints</th>
		      <th>Example</th>
		    </tr>
		  </thead>
		  <tbody ng-repeat="(name, field) in model.schema">
		    <tr>
		      <td>
		        {{name}}<br/>
		        <button type="button" class="btn btn-default btn-xs" ng-disabled="(!isRef(field) && !isComplexType(field))" ng-click="fieldBtn(field)">{{field.type}}</button>
		        <button type="button" class="btn btn-link btn-xs" disabled="true" ng-if="field.readOnly || field.virtual">Read-Only</button>
		        <button type="button" class="btn btn-link btn-xs" disabled="true" ng-if="field.index">Indexed</button>
		      </td>
		      <td>{{field.description}}</td>
		      <td>
		      	<p ng-if="field.virtual">This is a virtual field<br /><code>={{field.virtual}}</code></p>
		      	<p ng-if="field.match">This string must match {{field.match}}</p>
		      	<p ng-if="field.minlength">This field must be at least {{field.minlength}} characters long</p>
		      	<p ng-if="field.maxlength">This field cannot be more than {{field.maxlength}} characters long</p>
		      	<p ng-if="field.unique">This field must be unique</p>
		      	<p ng-if="field.required">This field is required</p>
		      	<p ng-if="field.max">This field cannot exceed {{field.max}}</p>
		      	<p ng-if="field.min">This field cannot exceed {{field.min}}</p>
		      	<p ng-if="field.choices">This field displayed as {{field.choices}}</p>
		      	<p ng-if="field.fileType">This must be {{field.fileType}} type</p>
		      	<p ng-if="field.maxSize">File size must not exceed {{field.maxSize}}</p>
		      	<p ng-if="field.protocol">Url must use {{field.protocol}}</p>
		      	<p ng-if="field.maxlat">Maximum latitude is {{field.maxlat}}</p>
		      	<p ng-if="field.minlat">Minimum latitude is {{field.minlat}}</p>
		      	<p ng-if="field.maxlng">Maximum longitude is {{field.maxlng}}</p>
		      	<p ng-if="field.minlng">Minimum longitude is {{field.minlng}}</p>
		      	<p ng-if="field.options">Options for field {{field.options}}</p>
		      	<p ng-if="field.maxpicked">Cannot choose more than {{field.maxpicked}}</p>
		      	<p ng-if="field.minpicked">Must choose at least {{field.minpicked}}</p>
		      </td>
		      <td>
		      	<p ng-if="field.example">{{field.example}}</p>
		      </td>
		    </tr>
		    <tr ng-show="field._showSubSchema">
		      <td colspan="3">
		        <h5 style="text-transform:capitalize;">{{name}} Subschema</h5>
		        <table class="table table-striped table-bordered table-hover" >
						  <thead>
						    <tr>
						      <th>Field</th>
						      <th>Description</th>
						      <th>Constraints</th>
						    </tr>
						  </thead>
						  <tbody ng-repeat="(name, field) in field.subSchema">
						    <tr>
						      <td>
						        {{name}}<br/>
						        <button type="button" class="btn btn-default btn-xs" ng-disabled="!isRef(field) || isComplexType(field)" ng-click="fieldBtn(field)">{{field.type}}</button>
						      </td>
						      <td>{{field.description}}</td>
						      <td>
						      	<p ng-if="field.match">This string must match {{field.match}}</p>
						      	<p ng-if="field.minlength">This field must be at least {{field.minlength}} characters long</p>
						      	<p ng-if="field.maxlength">This field cannot be more than {{field.maxlength}} characters long</p>
						      	<p ng-if="field.unique">This field must be unique</p>
						      	<p ng-if="field.required">This field is required</p>
						      	<p ng-if="field.max">This field cannot exceed {{field.max}}</p>
						      	<p ng-if="field.min">This field cannot exceed {{field.min}}</p>
						      	<p ng-if="field.choices">This field displayed as {{field.choices}}</p>
						      	<p ng-if="field.fileType">This must be {{field.fileType}} type</p>
						      	<p ng-if="field.maxSize">File size must not exceed {{field.maxSize}}</p>
						      	<p ng-if="field.protocol">Url must use {{field.protocol}}</p>
						      	<p ng-if="field.maxlat">Maximum latitude is {{field.maxlat}}</p>
						      	<p ng-if="field.minlat">Minimum latitude is {{field.minlat}}</p>
						      	<p ng-if="field.maxlng">Maximum longitude is {{field.maxlng}}</p>
						      	<p ng-if="field.minlng">Minimum longitude is {{field.minlng}}</p>
						      	<p ng-if="field.options">Options for field {{field.options}}</p>
						      	<p ng-if="field.maxpicked">Cannot choose more than {{field.maxpicked}}</p>
						      	<p ng-if="field.minpicked">Must choose at least {{field.minpicked}}</p>
						      </td>
						    </tr>
						    <tr ng-show="field._showSubSchema">
						      <td colspan="3">
						        {{field.name}} Subschema<br/>
						        
						      </td>
						    </tr>
						  </tbody>
						</table>
		      </td>
		    </tr>
		  </tbody>
		</table>
		<button type="button" class="btn btn-default btn-xs" ng-click="displayJSON()" style="margin-bottom:10px;">
			{{displayTable ? 'Display as raw JSON' : 'Hide JSON'}}
		</button>
		<pre ng-show="!displayTable">{{jsonDisplayData}}</pre>
	</div>


</section>
